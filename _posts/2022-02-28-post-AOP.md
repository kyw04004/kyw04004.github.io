---
title: AOP - 관점 지향 프로그래밍
categories:
- Spring
excerpt: "AOP에 대한 포스팅입니다."
feature_text: |
  ## AOP
  스프링 3대 프로그래밍 모델
feature_image: "https://picsum.photos/2560/600?image=733"
image: "https://picsum.photos/2560/600?image=733"


---

### AOP란?
- 관점 지향 프로그래밍 (Aspect-Oriented Programming)
- 애플리케이션을 바라보는 관점을 하나하나의 기능에서 <br> 횡단 관심사(cross-cutting concerns) 관점으로 달리 보는 것
- 횡단 관심사를 깔끔하게 처리하기 어려운 OOP의 <br> 부족한 부분을 보조하는 목적으로 개발

<br>

### AOP를 사용하는 이유
- 애플리케이션 로직은 크게 핵심 기능과 부가 기능으로 나누어짐
- 핵심 기능은 해당 객체가 제공하는 고유의 기능
- 부가 기능은 핵심 기능을 보조하기 위해 제공되는 기능
	+ ex) 로그 추적 로직, 트랜잭션 기능
- 핵심 기능과 부가 기능은 하나의 객체 안에 섞이게 된다.
- 보통 부가 기능은 여러 클래스에 걸쳐 함께 사용되는데, <br> 이러한 부가 기능은 횡단 관심사 (cross-cutting concerns)가 된다. <br> 즉, 하나의 부가 기능이 여러 곳에 동일하게 사용된다.
- 이런 부가 기능을 적용할 때 문제가 발생한다.
	+ 아주 많은 반복, 여러 곳에 퍼져 중복 코드, <br> 변경시 중복에 의해 많은 수정, 적용 대상 변경시 많은 수정
- AOP는 핵심 기능과 부가 기능을 분리해 이런 문제들을 해결해준다.

<br>

### 스프링 AOP
- 스프링은 AspectJ의 문법을 차용하고 프록시 방식의 AOP를 적용
	+ AspectJ를 직접 사용하는 것이 아님
- 프록시 방식을 사용하는 스프링 AOP는 메서드 실행 지점에만 AOP를 적용 가능
	+ 프록시는 메서드 오버라이딩 개념으로 동작, <br> 따라서 생성자나 static 메서드, 필드 값 접근에는 프록시 개념이 적용될 수 없음
	+ 프록시를 사용하는 스프링 AOP의 조인 포인트는 메서드 실행으로 제한
- 프록시 방식을 사용하는 스프링 AOP는 스프링 컨테이너가 관리할 수 있는 스프링 빈에만 AOP 적용 가능
- 동작과정 <br>
![image](https://user-images.githubusercontent.com/56823099/155936775-10ea8b66-ed4b-4ddf-8308-63a410a6cfbb.png)

<br>

- AspectJ를 사용해서 컴파일 시점과 클래스 로딩 시점에 적용하는 AOP는 <br> 바이트코드를 실제 조작하기때문에 해당 기능을 모든 지점에 다 적용 가능
- AspectJ를 사용하면 더 복잡하고 더 다양한 기능 사용 가능하지만, <br> 사용하려면 공부할 내용도 많고, 자바 관련 설정도 복잡하다. <br> 반면에 스프링 AOP는 별도의 추가 자바 설정없이 스프링만 있으면 편리하게 AOP를 사용할 수 있고, <br> 스프링이 제공하는 AOP 기능만 사용해도 실무의 대부분 문제 해결 가능
- AspectJ란 AOP의 대표적인 구현 프레임워크

<br>

### AOP 용어 정리
- 조인 포인트(Join point)
	+ 어드바이스가 적용될 수 있는 위치, 메소드 실행, 생성자 호출, <br> 필드 값 접근, static 메서드 접근 같은 프로그램 실행 중 지점
	+ 추상적인 개념으로, AOP를 적용할 수 있는 모든 지점
	+ 스프링 AOP는 프록시 방식을 사용하므로 <br> 조인포인트는 항상 메소드 실행 지점으로 제한
- 포인트컷(Pointcut)
	+ 조인 포인트 중에서 어드바이스가 적용될 위치를 선별하는 기능
	+ 주로 AspectJ 표현식을 사용해서 지정
	+ 프록시를 사용하는 스프링 AOP는 메서드 실행 지점만 포인트컷 가능
- 타겟(target)
	+ 어드바이스를 받는 객체, 포인트컷으로 결정
- 어드바이스(Advice)
	+ 부가 기능
	+ 특정 조인 포인트에서 Aspect에 의해 취해지는 조치
	+ Around, Before, After와 같은 다양한 종료가 있음
- 애스펙트(Aspect)
	+ 어드바이스 + 포인트컷을 모듈화한 것
	+ @Aspect를 생각하면 됨
	+ 여러 어드바이스와 포인트 컷이 함께 존재할 수 있음
- 어드바이저(Advisor)
	+ 스프링 AOP에서만 사용되는 특별한 용어
	+ 하나의 어드바이스와 하나의 포인트 컷으로 구성된 애스펙트
- 위빙(Weaving)
	+ 포인트컷으로 결정한 타겟의 조인 포인트에 어드바이스를 적용하는 것
	+ 위빙을 통해 핵심 기능 코드에 영향을 주지 않고 부가 기능 추가 가능
	+ AOP 적용을 위해 애스펙트를 객체에 연결한 상태
- AOP 프록시
	+ AOP 기능을 구현하기 위해 만든 프록시 객체
	+ 스프링에서 AOP 프록시는 JDK 동적 프록시 또는 CGLIB 프록시
- 그림자료 <br>
![image](https://user-images.githubusercontent.com/56823099/155936930-162f2c85-d1df-4beb-b0a0-a4e36fcb5ae9.png)

<br>

### 출처

[스프링 핵심 원리 - 고급편 by 김영한](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89%ED%8E%B8#)
